<idea-plugin>
    <id>com.wanggaowan.tools</id>
    <name>FlutterDevTools</name>
    <vendor email="wanggaowan@163.com" url="https://github.com/wanggaowan/FlutterDevTools.git"/>

    <description><![CDATA[
    <h2>提供Flutter开发所需工具</h2>
    <ol>
      <li>项目结构增加Flutter项目专属分类</li>
      <li>json转dart</li>
      <li>一键导入android图片</li>
      <li>常用命令提供快捷方式</li>
      <li>实时显示多语言翻译后文本</li>
    </ol>
    ]]></description>

    <change-notes><![CDATA[
    <p>1.1</p>
    <ul>
      <li>增加生成图片资源引用文件并配置yaml assets节点功能</li>
      <li>增加实时显示多语言翻译后文本功能</li>
      <li>增加执行gen-l10n快捷方式</li>
    </ul>

    <p>1.0</p>
    <ul>
      <li>项目结构增加Flutter项目专属分类，仅展示Flutter开发重点关注文件</li>
      <li>提供json转dart并支持序列化</li>
      <li>提供一键执行dart序列化/开启序列化观察者命令</li>
      <li>提供一键导入android图片目录结构文件到Flutter</li>
      <li>提供flutter图片资源管理ToolWindow</li>
    </ul>
    ]]>
    </change-notes>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends>Dart</depends>
    <depends>io.flutter</depends>
    <depends>org.jetbrains.plugins.yaml</depends>

    <extensions defaultExtensionNs="com.intellij">
        <projectViewPane implementation="com.wanggaowan.tools.projectviewpane.FlutterProjectViewPane"
                         id="Flutter Pane"/>
        <notificationGroup displayType="BALLOON" id="com.wanggaowan.tools.notification" isLogByDefault="false"/>

        <toolWindow id="Resource Manager"
                    factoryClass="com.wanggaowan.tools.toolwindow.ResourcePreviewToolWindowFactory"
                    icon="FlutterIcons.Flutter_13"/>

        <applicationService serviceImplementation="com.wanggaowan.tools.settings.PluginSettings"/>
        <applicationConfigurable parentId="tools" instance="com.wanggaowan.tools.settings.PluginSettingsConfigurable"
                                 id="FlutterDevTools.PluginSettingsConfigurable"
                                 displayName="FlutterDevTools"/>

        <lang.foldingBuilder language="Dart" implementationClass="com.wanggaowan.tools.lang.I18nFoldingBuilder"/>
        <actionOnSave implementation="com.wanggaowan.tools.listener.GenL10nListener" order="last"/>
        <filePasteProvider implementation="com.wanggaowan.tools.listener.ImportSameImageListener" order="first"/>
        <refactoring.moveHandler implementation="com.wanggaowan.tools.listener.ImportSameImageListener" order="first"/>
    </extensions>

    <applicationListeners>
        <listener class="com.wanggaowan.tools.listener.ProjectManagerListenerImpl"
                  topic="com.intellij.openapi.project.ProjectManagerListener"/>
        <listener class="com.wanggaowan.tools.listener.GenL10nListener"
                  topic="com.intellij.openapi.fileEditor.FileEditorManagerListener"/>
    </applicationListeners>

    <actions>
        <!--文件编辑界面的命令-->
        <action
            id="FlutterDevTools.DoL10nAction2"
            class="com.wanggaowan.tools.actions.DoL10nAction2"
            text="gen-l10n"
            description="执行flutter gen-l10n命令">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
        <action id="FlutterDevTools.JsonToDart"
                class="com.wanggaowan.tools.actions.JsonToDartAction"
                text="Json To Dart"
                description="Json convert to dart">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
        <action id="FlutterDevTools.GeneratorJsonSerializableAction"
                class="com.wanggaowan.tools.actions.GeneratorClassSerializableMethodAction"
                text="生成类序列化方法"
                description="Json convert to dart">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
        <action
            id="FlutterDevTools.GeneratorGFileAction2"
            class="com.wanggaowan.tools.actions.GeneratorGFileAction2"
            text="生成 .g.dart"
            description="根据Dart实体生成.g.dart文件">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>

        <!--tools分组下的命令-->
        <action
            id="FlutterDevTools.DoL10nAction"
            class="com.wanggaowan.tools.actions.DoL10nAction"
            text="gen-l10n"
            description="执行flutter gen-l10n命令">
            <add-to-group group-id="FlutterToolsActionGroup" anchor="last"/>
        </action>
        <action
            id="FlutterDevTools.GeneratorGFileAction"
            class="com.wanggaowan.tools.actions.GeneratorGFileAction"
            text="生成 .g.dart"
            description="根据Dart实体生成.g.dart文件">
            <add-to-group group-id="FlutterToolsActionGroup" anchor="last"/>
        </action>
        <action
            id="FlutterDevTools.JsonSerializableWatcher"
            class="com.wanggaowan.tools.actions.JsonSerializableWatcherAction"
            text="开启自动生成.g.dart文件服务"
            description="开启根据Dart实体生成.g.dart文件观察者">
            <add-to-group group-id="FlutterToolsActionGroup" anchor="last"/>
        </action>
        <action id="FlutterDevTools.ImportSameImageResAction"
                class="com.wanggaowan.tools.actions.ImportSameImageResAction"
                text="导入不同分辨率下的相同文件">
            <add-to-group group-id="FlutterToolsActionGroup" anchor="last"/>
        </action>
        <action id="FlutterDevTools.GeneratorImageRefAction"
                class="com.wanggaowan.tools.actions.GeneratorImageRefAction"
                text="生成图片资源引用文件并配置yaml assets节点">
            <add-to-group group-id="FlutterToolsActionGroup" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
